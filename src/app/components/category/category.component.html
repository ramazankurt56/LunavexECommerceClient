<div class="wrapper">
    <div class="content-wrapper">
        <section class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1>Kategoriler</h1>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active">Category</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
        <section class="content">
            <div class="container-fluid">
                <div class="card card-primary">
                    <div class="card-header">
                        <h3 class="card-title">Kategory Ekle</h3>
                    </div>
                    <div class="card-body">
                        <h2>Kategoriler</h2>
                        <div class="row">
                            @for (list of parentList ; track list;let categoryIndex =$index ) {
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <div class="scrollable-div card">
                                        <ul>
                                            @for (parentCategory of list ; track parentCategory; let parentIndex=$index)
                                            {
                                            <li (click)="getByParentCategoryId(parentCategory.id,categoryIndex,parentCategory.name)">
                                                {{parentCategory.name}}</li>
                                            }

                                        </ul>
                                    </div>
                                </div>
                                @if (categoryIndex >0) {
                                <button class="btn btn-primary btn-sm mb-1 ms-1" data-toggle="modal"
                                    style="width: 100%;" data-target="#AddCategoyModal"
                                    [disabled]="categoryIndex !== parentList.length - 1">
                                    Ekle</button>
                                    <button class="btn btn-primary btn-sm mb-1 ms-1" data-toggle="modal"
                                    style="width: 100%;" data-target="#AddCategoyListModal"
                                    [disabled]="categoryIndex !== parentList.length - 1">
                                    Liste Ekle</button>

                                }
                                @else if (categoryIndex===0) {
                                <button class="btn btn-primary btn-sm mb-1 ms-1" data-toggle="modal"
                                    style="width: 100%;" data-target="#AddMainCategoyModal"
                                    [disabled]="categoryIndex !== parentList.length - 1">
                                    Ekle</button>
                                }
                            </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<div class="modal fade" id="AddCategoyModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Kategori Ekle</h1>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                    (click)="clearCreateCategoryModel()" #addCategoryModalCloseBtn>
                    <span aria-hidden="true">&times;</span></button>
            </div>
            <form #addCategoryForm="ngForm" formValidate autocomplete="off"
                (ngSubmit)="createCategory(addCategoryForm)">
                <div class="modal-body">
                    <div class="form-group mt-1">
                        <label><span style="color:rgb(255, 255, 255) ; background-color: rgb(146, 0, 0);">{{modalCategoryName.toLocaleUpperCase()}}</span> Kategorisi Ekle</label>
                        <input type="text" required minlength="1" id="categoryName" class="form-control"
                            [(ngModel)]="category.name" name="categoryName">
                        <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="AddCategoyListModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Kategori Listesi Ekle</h1>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                    (click)="clearCreateCategoryListModel()" #addCategoryListModalCloseBtn>
                    <span aria-hidden="true">&times;</span></button>
            </div>
            <form #addCategoryListForm="ngForm" formValidate autocomplete="off"
                (ngSubmit)="createCategoryList(addCategoryListForm)">
                <div class="modal-body">
                    <div class="form-group mt-1">
                        <label><span style="color:rgb(255, 255, 255) ; background-color: rgb(146, 0, 0);">{{modalCategoryName.toLocaleUpperCase()}}</span> Kategorisi Ekle</label>
                        <textarea class="form-control" rows="5" [(ngModel)]="categoryNames" name="categoryNames"
                            required></textarea>
                        <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="AddMainCategoyModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">Ana Kategori Ekle</h1>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                    (click)="clearCreateMainCategoryModel()" #addMainCategoryModalCloseBtn>
                    <span aria-hidden="true">&times;</span></button>
            </div>
            <form #addMainCategoryForm="ngForm" formValidate autocomplete="off"
                (ngSubmit)="createCategory(addMainCategoryForm)">
                <div class="modal-body">
                    <div class="form-group mt-1">
                        <label>Kategori AdÄ±</label>
                        <input type="text" required minlength="1" id="mainCategoryName" class="form-control"
                            [(ngModel)]="category.name" name="mainCategoryName">
                        <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>
</div>